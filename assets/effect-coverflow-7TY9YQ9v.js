import{A as q,B as I}from"./index-3Nluqhln.js";function X(n){const{effect:t,swiper:e,on:i,setTranslate:d,setTransition:f,overwriteParams:c,perspective:w,recreateShadows:o,getEffectParams:h}=n;i("beforeInit",()=>{if(e.params.effect!==t)return;e.classNames.push(`${e.params.containerModifierClass}${t}`),w&&w()&&e.classNames.push(`${e.params.containerModifierClass}3d`);const s=c?c():{};Object.assign(e.params,s),Object.assign(e.originalParams,s)}),i("setTranslate",()=>{e.params.effect===t&&d()}),i("setTransition",(s,p)=>{e.params.effect===t&&f(p)}),i("transitionEnd",()=>{if(e.params.effect===t&&o){if(!h||!h().slideShadows)return;e.slides.forEach(s=>{s.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(p=>p.remove())}),o()}});let r;i("virtualUpdate",()=>{e.params.effect===t&&(e.slides.length||(r=!0),requestAnimationFrame(()=>{r&&e.slides&&e.slides.length&&(d(),r=!1)}))})}function Y(n,t){const e=q(t);return e!==t&&(e.style.backfaceVisibility="hidden",e.style["-webkit-backface-visibility"]="hidden"),e}function x(n,t,e){const i=`swiper-slide-shadow${e?`-${e}`:""}${n?` swiper-slide-shadow-${n}`:""}`,d=q(t);let f=d.querySelector(`.${i.split(" ").join(".")}`);return f||(f=I("div",i.split(" ")),d.append(f)),f}function D(n){let{swiper:t,extendParams:e,on:i}=n;e({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),X({effect:"coverflow",swiper:t,on:i,setTranslate:()=>{const{width:c,height:w,slides:o,slidesSizesGrid:h}=t,r=t.params.coverflowEffect,s=t.isHorizontal(),p=t.translate,z=s?-p+c/2:-p+w/2,P=s?r.rotate:-r.rotate,A=r.depth;for(let g=0,C=o.length;g<C;g+=1){const l=o[g],S=h[g],j=l.swiperSlideOffset,O=(z-j-S/2)/S,a=typeof r.modifier=="function"?r.modifier(O):O*r.modifier;let m=s?P*a:0,u=s?0:P*a,$=-A*Math.abs(a),b=r.stretch;typeof b=="string"&&b.indexOf("%")!==-1&&(b=parseFloat(r.stretch)/100*S);let v=s?0:b*a,M=s?b*a:0,T=1-(1-r.scale)*Math.abs(a);Math.abs(M)<.001&&(M=0),Math.abs(v)<.001&&(v=0),Math.abs($)<.001&&($=0),Math.abs(m)<.001&&(m=0),Math.abs(u)<.001&&(u=0),Math.abs(T)<.001&&(T=0),t.browser&&t.browser.isSafari&&(Math.abs(m)/90%2===1&&(m+=.001),Math.abs(u)/90%2===1&&(u+=.001));const k=`translate3d(${M}px,${v}px,${$}px)  rotateX(${u}deg) rotateY(${m}deg) scale(${T})`,H=Y(r,l);if(H.style.transform=k,l.style.zIndex=-Math.abs(Math.round(a))+1,r.slideShadows){let y=s?l.querySelector(".swiper-slide-shadow-left"):l.querySelector(".swiper-slide-shadow-top"),E=s?l.querySelector(".swiper-slide-shadow-right"):l.querySelector(".swiper-slide-shadow-bottom");y||(y=x("coverflow",l,s?"left":"top")),E||(E=x("coverflow",l,s?"right":"bottom")),y&&(y.style.opacity=a>0?a:0),E&&(E.style.opacity=-a>0?-a:0)}}},setTransition:c=>{t.slides.map(o=>q(o)).forEach(o=>{o.style.transitionDuration=`${c}ms`,o.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(h=>{h.style.transitionDuration=`${c}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}export{D as E};
